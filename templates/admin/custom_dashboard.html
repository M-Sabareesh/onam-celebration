{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}Admin Dashboard - {{ site_title|default:"Django site admin" }}{% endblock %}

{% block branding %}
<h1 id="site-name"><a href="{% url 'admin:index' %}">{{ site_header|default:"Django administration" }}</a></h1>
{% endblock %}

{% block content %}
<div style="padding: 20px;">
    <h1>ðŸŽ‰ à´“à´£à´¾à´˜àµ‹à´·à´‚ Admin Dashboard</h1>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0;">
        
        <!-- Statistics Cards -->
        <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; border-left: 4px solid #007cba;">
            <h3 style="margin-top: 0; color: #007cba;">ðŸ“Š Quick Stats</h3>
            <p><strong>Pending Answers:</strong> {{ pending_answers }}</p>
            <p><strong>Total Questions:</strong> {{ total_questions }}</p>
            <p><strong>Active Players:</strong> {{ total_players }}</p>
            <p><strong>Online Now:</strong> <span style="color: green;">{{ online_players }}</span></p>
            <p><strong>Unassigned Players:</strong> <span style="color: orange;">{{ unassigned_players }}</span></p>
        </div>
        
        <!-- Team Statistics -->
        <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; border-left: 4px solid #6f42c1;">
            <h3 style="margin-top: 0; color: #6f42c1;">ðŸ‘¥ Team Statistics</h3>
            {% for team in team_stats %}
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span><strong>{{ team.name }}:</strong></span>
                    <span>{{ team.total }} members ({{ team.online }} online)</span>
                </div>
            {% endfor %}
        </div>
        
        <!-- Quick Actions -->
        <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; border-left: 4px solid #28a745;">
            <h3 style="margin-top: 0; color: #28a745;">âš¡ Quick Actions</h3>
            <p><a href="{% url 'admin:approve_answers' %}" class="button">Approve Answers ({{ pending_answers }})</a></p>
            <p><a href="{% url 'admin:bulk_upload_questions' %}" class="button">Manage Questions</a></p>
            <p><a href="{% url 'admin:manage_events' %}" class="button">Manage Events</a></p>
            <p><a href="{% url 'admin:core_player_changelist' %}" class="button">View Players</a></p>
        </div>
        
        <!-- Recent Activity -->
        <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; border-left: 4px solid #ffc107;">
            <h3 style="margin-top: 0; color: #e68900;">ðŸŽª Event Management</h3>
            <p><a href="{% url 'admin:manage_events' %}" class="button">Manage Events</a></p>
            <p><a href="{% url 'admin:core_event_changelist' %}" class="button">View All Events</a></p>
            <p><a href="{% url 'admin:core_eventscore_changelist' %}" class="button">Event Scores</a></p>
            <p><a href="{% url 'admin:core_eventvote_changelist' %}" class="button">Event Votes</a></p>
        </div>
        
        <!-- Admin Tools -->
        <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; border-left: 4px solid #dc3545;">
            <h3 style="margin-top: 0; color: #dc3545;">ðŸ“‹ Admin Tools</h3>
            <p><a href="{% url 'admin:core_treasurehuntquestion_changelist' %}" class="button">Question Management</a></p>
            <p><a href="{% url 'admin:core_playeranswer_changelist' %}" class="button">All Answers</a></p>
            <p><a href="{% url 'admin:core_gamesession_changelist' %}" class="button">Game Sessions</a></p>
        </div>
        
    </div>
    
    <div style="margin-top: 30px;">
        <h2>ðŸŽ¯ Admin Guide</h2>
        <div style="background: #e9ecef; padding: 15px; border-radius: 5px;">
            <h4>Admin Guide:</h4>
            <ol>
                <li><strong>Approve Answers:</strong> Review and approve/reject player submissions</li>
                <li><strong>Manage Questions:</strong> Add new questions and answers for the treasure hunt</li>
                <li><strong>Assign Teams:</strong> Select unassigned players and use bulk actions to assign them to teams</li>
                <li><strong>Monitor Activity:</strong> Track player online status and engagement</li>
                <li><strong>View Progress:</strong> Check game sessions and player completion rates</li>
            </ol>
            
            <h4>Quick Tips:</h4>
            <ul>
                <li>Players can join by entering their name manually - no need to pre-register</li>
                <li>Use bulk actions in the Player admin to assign multiple players to teams at once</li>
                <li>Online status updates automatically - green dot means active within 5 minutes</li>
                <li>Always approve photo answers manually by viewing the submitted images</li>
                <li>Assign appropriate points based on answer quality</li>
                <li>Keep questions in proper order for the treasure hunt flow</li>
            </ul>
        </div>
    </div>
</div>

<style>
.button {
    background-color: #417690;
    color: white;
    padding: 8px 16px;
    text-decoration: none;
    border-radius: 4px;
    border: none;
    cursor: pointer;
    display: inline-block;
    margin: 2px;
}

.button:hover {
    background-color: #205067;
    color: white;
    text-decoration: none;
}
</style>
{% endblock %}
